# TablePick-BackEnd

> ì´ ë ˆí¬ëŠ” **íŒ€ í”„ë¡œì íŠ¸**ë¡œ ì§„í–‰í•œ ì‹ë‹¹ ì˜ˆì•½Â·ê²°ì œ í”Œë«í¼ì—ì„œ  
> ì œê°€ ë§¡ì•˜ë˜ **ì˜ˆì•½Â·ê²°ì œ ë„ë©”ì¸**ì„ ì¤‘ì‹¬ìœ¼ë¡œ **ê°œì¸ì ìœ¼ë¡œ ì •ë¦¬**í•´ ë‘” ë²„ì „ì…ë‹ˆë‹¤.  
> (ì›ë³¸ íŒ€ í”„ë¡œì íŠ¸: [ë§í¬](https://github.com/orgs/4und-Cloud/repositories))

## ğŸ¤ í˜‘ì—… ë¬¸ì„œ
í”„ë¡œì íŠ¸ ì§„í–‰ ì¼ì •, ì™€ì´ì–´í”„ë ˆì„, í˜‘ì—… ì „ëµ ë“±ì€ ë³„ë„ ë¬¸ì„œì— ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.  
ğŸ‘‰ [í˜‘ì—… ì•„ì¹´ì´ë¸Œ ë°”ë¡œê°€ê¸°](https://young-shallot-30c.notion.site/27859cec87688005aa10dec9345d90f7?source=copy_link)

---

## ğŸ”— ê´€ë ¨ ë ˆí¬ì§€í† ë¦¬
- [TablePick-Notification-Server](https://github.com/OHEUNSOL/TablePick-Notification)  
  â†’ ì˜ˆì•½ ì„œë¹„ìŠ¤ì™€ ë¶„ë¦¬ëœ **ì•Œë¦¼ ì„œë²„**, Kafka ì»¨ìŠˆë¨¸ ì„œë²„(ë©”ì¼ ì²˜ë¦¬ ë‹´ë‹¹)

---  

## ğŸš€ í”„ë¡œì íŠ¸ ê°œìš”
TablePickì€ ëŒ€ê·œëª¨ íŠ¸ë˜í”½ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” **ë ˆìŠ¤í† ë‘ ì˜ˆì•½Â·ê²°ì œ í”Œë«í¼**ì…ë‹ˆë‹¤.  
ì˜ˆì•½ ìŠ¬ë¡¯ ê´€ë¦¬, ê²°ì œ ì²˜ë¦¬, ì„±ëŠ¥ ìµœì í™”ë¥¼ ì¤‘ì ì ìœ¼ë¡œ ê°œì„ í–ˆìŠµë‹ˆë‹¤.

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### ğŸ”¹ í”„ë¡ íŠ¸ì—”ë“œ
![React](https://img.shields.io/badge/React-61DAFB?style=flat&logo=react&logoColor=black)
![TypeScript](https://img.shields.io/badge/TypeScript-3178C6?style=flat&logo=typescript&logoColor=white)
![TailwindCSS](https://img.shields.io/badge/TailwindCSS-06B6D4?style=flat&logo=tailwindcss&logoColor=white)

### ğŸ”¹ ë°±ì—”ë“œ
![Java](https://img.shields.io/badge/Java%2021-FF7800?style=flat&logo=openjdk&logoColor=white)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot%203.4.5-6DB33F?style=flat&logo=springboot&logoColor=white)
![Spring Security](https://img.shields.io/badge/Spring%20Security-6DB33F?style=flat&logo=springsecurity&logoColor=white)
![MySQL](https://img.shields.io/badge/MySQL%208.0.41-4479A1?style=flat&logo=mysql&logoColor=white)
![Redis](https://img.shields.io/badge/Redis-DC382D?style=flat&logo=redis&logoColor=white)
![OAuth](https://img.shields.io/badge/OAuth2-000000?style=flat&logo=openid&logoColor=white)
![FCM](https://img.shields.io/badge/Firebase%20Cloud%20Messaging-FFCA28?style=flat&logo=firebase&logoColor=black)
![JWT](https://img.shields.io/badge/JWT-black?style=flat&logo=jsonwebtokens&logoColor=white)

### ğŸ”¹ AI & Data
![Python](https://img.shields.io/badge/Python%203.11.8-3776AB?style=flat&logo=python&logoColor=white)
![FastAPI](https://img.shields.io/badge/FastAPI-009688?style=flat&logo=fastapi&logoColor=white)
![scikit-learn](https://img.shields.io/badge/scikit--learn-FF9A00?style=flat&logo=scikitlearn&logoColor=white)
![pandas](https://img.shields.io/badge/pandas-150458?style=flat&logo=pandas&logoColor=white)
![numpy](https://img.shields.io/badge/numpy-013243?style=flat&logo=numpy&logoColor=white)
![Selenium](https://img.shields.io/badge/Selenium-43B02A?style=flat&logo=selenium&logoColor=white)

### ğŸ”¹ í˜‘ì—… ë„êµ¬
![GitHub](https://img.shields.io/badge/GitHub-181717?style=flat&logo=github&logoColor=white)
![Jira](https://img.shields.io/badge/Jira-0052CC?style=flat&logo=jira&logoColor=white)
![Notion](https://img.shields.io/badge/Notion-000000?style=flat&logo=notion&logoColor=white)
![Discord](https://img.shields.io/badge/Discord-5865F2?style=flat&logo=discord&logoColor=white)

---

## ğŸ“ ì•„í‚¤í…ì²˜

<img width="341" height="423" alt="image" src="https://github.com/user-attachments/assets/18f1bfd1-fb14-4006-a9f6-cb4046f28a08" />

---

## ğŸ—º ERD

<img width="2820" height="1012" alt="image" src="https://github.com/user-attachments/assets/ac73d8b5-0d06-4a28-a72e-376496e1905b" />
> ì›ë³¸ ERD : [ERDCloud ë³´ê¸°](https://www.erdcloud.com/d/pKQZMxpT7NpDe9wn9)

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ
- **Backend**: Java 21, Spring Boot
- **Infra / Data**: Kafka, MySQL, Redis, Docker
- **Testing / Observability**: k6, Grafana, Prometheus

---

### ğŸš€ CI/CD ë°°í¬ íš¨ìœ¨ ê°œì„  (ê²°ì œ ì„œë²„ ë¶„ë¦¬ íš¨ê³¼)

- **ë°°ê²½**  
  - ê¸°ì¡´ ë‹¨ì¼ ì„œë²„ êµ¬ì¡°ì—ì„œëŠ” ì˜ˆì•½/ê²°ì œ ì½”ë“œê°€ í•œ ë ˆí¬ì— ë¬¶ì—¬ ìˆì–´, ê²°ì œ ë¡œì§ ìˆ˜ì • ì‹œ ì „ì²´ ì„œë²„ë¥¼ ë‹¤ì‹œ ë¹Œë“œ/ë°°í¬í•´ì•¼ í–ˆìŒ.
  - ê²°ì œ ì„œë²„ë¥¼ ë³„ë„ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¡œ ë¶„ë¦¬í•˜ë©´ì„œ **ë…ë¦½ ë°°í¬ ê°€ëŠ¥**.

- **ê²°ê³¼ (GitHub Actions ë¹Œë“œ ì‹œê°„ ë¹„êµ)**
  - ë¶„ë¦¬ ì „: ì „ì²´ ì„œë²„ ë¹Œë“œ/ë°°í¬ **2ë¶„ 41ì´ˆ**  
  - ë¶„ë¦¬ í›„: ê²°ì œ ì„œë²„ë§Œ ë°°í¬ â†’ **1ë¶„ 46ì´ˆ**  

<img width="319" height="153" alt="image" src="https://github.com/user-attachments/assets/86686b35-1069-4b20-85f3-3e96e7f0ad87" />

> ê²°ì œ ì„œë²„ ë¶„ë¦¬ë¥¼ í†µí•´ **ë°°í¬ ì†ë„ê°€ ì•½ 35% ê°œì„ **ë˜ì—ˆìœ¼ë©°, ìš´ì˜ ì‹œ ì¥ì•  ì˜í–¥ ë²”ìœ„ë„ ì¶•ì†Œ.

- **ì•ˆì •ì„±**
  - **ì¬ì‹œë„(Backoff) + DLQ**: ì¼ì‹œ ì¥ì•  ì‹œ ìë™ ì¬ì²˜ë¦¬, ì˜êµ¬ ì‹¤íŒ¨ëŠ” DLQë¡œ ê²©ë¦¬.
  - **Outbox íŒ¨í„´(ê³„íš)**: DB íŠ¸ëœì­ì…˜ê³¼ ì´ë²¤íŠ¸ ë°œí–‰ì„ ë¶„ë¦¬Â·ì•ˆì •í™”(ì´ë²¤íŠ¸ ìœ ì‹¤/ì¤‘ë³µ/ìˆœì„œ ë³´ì¥).

- **ìš´ì˜ í¬ì¸íŠ¸**
  - **Topic/Partition**: `payments` í† í”½, ì˜ˆì•½ID ê¸°ë°˜ íŒŒí‹°ì…”ë‹(ë™ì¼ ì˜ˆì•½ ìˆœì„œ ë³´ì¥).
  - **Idempotency**: `reservationId` + ìƒíƒœë¨¸ì‹ (READYâ†’PAID/FAILED)ë¡œ **ì¤‘ë³µ ì²˜ë¦¬ ì°¨ë‹¨**.
  - **ëª¨ë‹ˆí„°ë§**: ì†Œë¹„ ì§€ì—°(consumer lag), ì¬ì‹œë„/ì‹¤íŒ¨ìœ¨, DLQ ìˆ˜ì¹˜ ëŒ€ì‹œë³´ë“œí™”.

- **ì¶”ê°€/ê³ ë„í™” ê³„íš**
  - Outboxë¥¼ **íŠ¸ëœì­ì…˜ ë¡œê·¸ í…Œì´ë¸”** ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„ + **Outbox Relayer** ë°°ì¹˜.
  - **Exactly-once íë¦„** ê°•í™”: ì†Œë¹„ì¸¡ ë©±ë“±í‚¤ ìºì‹œ/í…Œì´ë¸”, Producer idempotence ì„¤ì •.
  - **ë³´ìƒ íŠ¸ëœì­ì…˜ ì‹œë‚˜ë¦¬ì˜¤** ë¬¸ì„œí™”(ë¶€ë¶„ ì‹¤íŒ¨ ì¼€ì´ìŠ¤ë³„ ë¡¤ë°±/ë³´ìƒ ë‹¨ê³„).
  - **ë¶€í•˜ í”„ë¡œíŒŒì¼ í™•ëŒ€**: VU/ëŸ¬ë‹íƒ€ì„/ì—ëŸ¬ìœ¨ ìŠ¤ìœ—ìŠ¤íŒŸ ì‚°ì¶œ í›„ ì˜¤í† ìŠ¤ì¼€ì¼ ê¸°ì¤€ ë°˜ì˜.
---

### ğŸ§ª ì‹¤í—˜ í™˜ê²½ & í…ŒìŠ¤íŠ¸ ì„¤ì •

- **í´ë¼ìš°ë“œ**: AWS (ë‹¨ì¼ VPC, ë™ì¼ AZ)
- **ì• í”Œë¦¬ì¼€ì´ì…˜**
  - ì˜ˆì•½ ì„œë¹„ìŠ¤: **EC2 t3.medium** (2 vCPU, 4GiB)
  - ê²°ì œ ì„œë¹„ìŠ¤: **EC2 t3.medium** (2 vCPU, 4GiB)
- **ë°ì´í„°ë² ì´ìŠ¤**
  - **Amazon RDS for MySQL â€“ db.t3.large** (2 vCPU, 4GiB)
- **ë©”ì‹œì§•**
  - **Apache Kafka** í´ëŸ¬ìŠ¤í„° (ë‹¨ì¼ ë¸Œë¡œì»¤) â€“ EC2 (ë™ì¼ VPC, ë‚´ë¶€ í†µì‹ )
- **ì˜¤í† ìŠ¤ì¼€ì¼ë§**: ë¹„í™œì„± (ê³ ì • ì¸ìŠ¤í„´ìŠ¤, í…ŒìŠ¤íŠ¸ ê°„ ë™ì¼ ì¡°ê±´ ìœ ì§€)
- **k6 ë¶€í•˜ í…ŒìŠ¤íŠ¸**
  - VU(ê°€ìƒì‚¬ìš©ì) = **5000**
  - ìš”ì²­ íŒ¨í„´: ì˜ˆì•½â†’ê²°ì œ í”Œë¡œìš° ë‹¨ì¼ ì—”ë“œí¬ì¸íŠ¸ ì¤‘ì‹¬
  - ê° ì‹œë‚˜ë¦¬ì˜¤ **ì‚¬ì „ ì›Œë°ì—… 30s** í›„ ì¸¡ì •(ì½œë“œ ìŠ¤íƒ€íŠ¸ ì˜í–¥ ìµœì†Œí™”)
 
---

## ğŸ“ ë‚¨ì€ ì‘ì—… (TODO)
- **DB ì¸ë±ìŠ¤ ìµœì í™”**: ì˜ˆì•½ ìŠ¬ë¡¯/ì‹ë‹¹ ë°ì´í„° ì¡°íšŒ ì„±ëŠ¥ ê°œì„ 
- **Outbox íŒ¨í„´** ì•ˆì •í™”: ì´ë²¤íŠ¸ ë°œí–‰ì˜ ì‹ ë¢°ì„± ë³´ì¥ (íŠ¸ëœì­ì…˜ ê²½ê³„ ëª…í™•í™”)
- **ë°ì´í„° ì •í•©ì„± ë³´ê°•**: ì˜ˆì•½ ì·¨ì†Œ/ê²°ì œ ì·¨ì†Œ ì‹œ íŠ¸ëœì­ì…˜ ì²˜ë¦¬
- **ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”**: ì™¸ë¶€ ê²°ì œ API ì¥ì•  ìƒí™© ì‹œ ì¬ì‹œë„ & ë³´ìƒ ì²˜ë¦¬

---

## ğŸ¥ ì‹œì—° ì˜ìƒ
https://drive.google.com/file/d/1ZoBAgl4vPlDY5-KWDxwHWnN-WZnCq-e9/view?usp=sharing
